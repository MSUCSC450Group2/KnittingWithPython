{% extends "image_manipulation/imageManipBase.html" %}
{% block title %}Application{% endblock %}
{% block head %}{% endblock %}
{% block content %}
<hr>

<div class="container-fluid">
  <!--The form -->
    <form id='my_form' method="post" action=".">

	{% csrf_token %}
      <fieldset>
	<legend>Colors</legend>
	<label># of Colors{{ form.numberOfColors }}</label>
      </fieldset>
      <fieldset>
	<legend>Gauge <a href="{% url 'instructions' %}#instr" name="app">Instructions</a></legend>
	<label>sts/in{{ form.gaugeSize }}</label>
      </fieldset>
      <fieldset>
	<legend>Project Size <a href="{% url 'instructions' %}#convert" name="inch">Convert centimeters to inches</a></legend>
	<label>Width(in){{ form.canvasLength }}</label>
	<label>Height(in){{ form.canvasWidth }}</label>
      </fieldset>
      <fieldset>
	<legend>Stitches</legend>
	<label class="radio">Type{{ form.knitType }}</label>
      </fieldset>
      <fieldset>
        <legend>Submit Changes</legend>
	<input type="submit" class="btn btn-primary render" value="Render"/>
      </fieldset>
    </form>




  <div id="userimage">
    <!-- image canvas -->
    <div>
      {# will have django img var here #}
      {% load staticfiles %}
      <img class="delay" src="../media/{{ image }}" alt="image" width="100%" />
    </div>
  </div>
  <div hidden id="loadingimage">
    <!-- image canvas -->
    <div>
      {# will have django img var here #}
      {% load staticfiles %}
      <img class="delay" src="{% static "/static/image_manipulation/img/loading.gif" %}" alt="image" />
    </div>
        Image is Processing. Please Wait.
  </div>

  <div class="imageupload" >
  <!-- Upload form. Note enctype attribute! -->
  <form method="post" classaction="." enctype="multipart/form-data">
    {% csrf_token %}
    {% if imgForm.imgFile.errors %}
      <div class="alert alert-danger" role="alert">
        <img src="{% static 'img/error_red_triangle_20.png' %}" label="!" />
        <span class="sr-only">Error</span>
        {{ imgForm.imgFile.errors }}
      </div>
    {% endif %}
    {{ imgForm.imgFile }}
    <input type="submit" value="Upload" />
  </form>
  </div>
  <hr>
  
</div>
{% endblock %}
{% block script %}
<script>

$(function(){
    $('#my_form').submit(function(event){
       
       $('#loadingimage').show();
        $('#userimage').hide();
        $('.well').hide();
        $('.imageupload').hide();
          
    });

});
S(document).ready(function(){
       $('#userimage').hide();
       $('#loadingimage').hide();
        $('#userimage').show(); 
        alert('reloaded');
});
</script>
{% endblock %}
