{% extends "image_manipulation/imageManipBase.html" %}
{% block title %}Application{% endblock %}
{% block head %}{% endblock %}
{% block content %}
<hr>

<div class="container-fluid">
  <!--The form -->
    <form id='my_form' class="row" method="post" action=".">
	{% csrf_token %}
      <fieldset>
	<legend>Colors</legend>
	<label># of Colors{{ form.numberOfColors }}</label>
      </fieldset>
      <fieldset>
	<legend>Gauge
          {% load staticfiles %}
          <a href="{% url 'instructions' %}#instr" title="Guage Help">
            <img src="{% static 'img/question_20.png' %}" alt="help" />
          </a>
        </legend>
        <label>sts/in {{ form.gaugeSize }}
        </label>
      </fieldset>
      <fieldset>
	<legend>Project Size
          <a href="{% url 'instructions' %}#convert" title="Metric Conversion">
            <img src="{% static 'img/question_20.png' %}" alt="help"/>
          </a>
        </legend>
	<label>Width(in){{ form.canvasLength }}</label>
	<label>Height(in){{ form.canvasWidth }}</label>
      </fieldset>
      <fieldset>
	<legend>Stitches</legend>
        <label class="radio">Type{{ form.knitType }}</label>
      </fieldset>
      <fieldset>
        <legend>Submit Changes</legend>
	<input type="submit" class="btn btn-primary render" value="Render"/>
      </fieldset>
    </form>

  <div id="userimage" class="row">
    <!-- image canvas -->
    <div>
      {# will have django img var here #}
      <img class="delay" src="../media/{{ image }}" alt="image" width="100%" />
    </div>
  </div>

  <div class="row imageupload" >
  <!-- Upload form. Note enctype attribute! -->
  <form method="post" classaction="." enctype="multipart/form-data">
    {% csrf_token %}
    {% if imgForm.imgFile.errors %}
      <div class="alert alert-danger" role="alert">
        <img src="{% static 'img/error_red_triangle_20.png' %}" label="!" />
        <span class="sr-only">Error</span>
        {{ imgForm.imgFile.errors }}
      </div>
    {% endif %}
    {{ imgForm.imgFile }}
	<input type="submit" value="Upload" />
  </form>
  </div>
  <div id="instructionsArea" class="row">
    {% if instructions == "" %}
    {% else %}
      <h2>Instructions</h2>
      <pre>{{instructions}}</pre>
    {% endif %}
  </div>

  <div id="help">
    <h4>Need to learn basics?</h4>
    <a href="{% url 'instructions' %}#links">Useful links</a>
  </div>

</div>

<div hidden id="loadingimage">
    <!-- image canvas -->
    <div class="autoresize">
      {# will have django img var here #}
      <img class="delay" src="{% static "/static/image_manipulation/img/loading.gif" %}" alt="image" />
    </div>
        Image is Processing. Please Wait.
  </div> <!--end loadingImage -->


{% endblock %}
{% block script %}
<script>

$(function(){
    $('#my_form').submit(function(event){
       
       $('#loadingimage').show();
        $('#userimage').hide();
        $('.imageupload').hide();
	$('#my_form').hide();
        $('#help').hide();
	$('#instructionsArea').hide();
    });

});
S(document).ready(function(){
       $('#userimage').show();
       $('#loadingimage').hide();
       $('#my_form').show();
	$('.imageupload').show();
	$('#help').show();
	$('#instructionsArea').show();
});
</script>
{% endblock %}
